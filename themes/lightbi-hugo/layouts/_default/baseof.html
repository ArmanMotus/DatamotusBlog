<!DOCTYPE html>

<html lang="{{ .Lang }}" itemscope itemtype="http://schema.org/WebPage">
  <head>
    {{ partial "head.html" . }}
  </head>
  <body>
    {{ block "header" . }}{{ partial "header.html" . }}{{ end }}
    {{ block "main" . }}{{ end }}
    
  </body>
  
<script type="text/javascript">
document.addEventListener("DOMContentLoaded", function() {
    let lastHeight = document.body.clientHeight;

    const observer = new MutationObserver(() => {
        let newHeight = document.body.clientHeight;
        if (lastHeight !== newHeight) {
            // Wait 500 milliseconds before sending the message
            setTimeout(() => {
                window.parent.postMessage({ frameHeight: newHeight }, '*');
                lastHeight = newHeight;
            }, 500);
        }
    });

    observer.observe(document.body, { attributes: true, childList: true, subtree: true });
});
</script>

</html>
